import{aH as F,aI as q,E as B,r as S,aJ as D,Z as K,a3 as L,O as x,o as N,as as G}from"./xKfPub33.js";function R(t){return F()?(q(t),!0):!1}function C(t){return typeof t=="function"?t():B(t)}const P=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const J=Object.prototype.toString,H=t=>J.call(t)==="[object Object]",_=()=>{},V=Z();function Z(){var t,e;return P&&((t=window==null?void 0:window.navigator)==null?void 0:t.userAgent)&&(/iP(ad|hone|od)/.test(window.navigator.userAgent)||((e=window==null?void 0:window.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function $(t){let e;function r(){return e||(e=t()),e}return r.reset=async()=>{const n=e;e=void 0,n&&await n},r}function z(t,e,r={}){const{immediate:n=!0}=r,f=S(!1);let s=null;function l(){s&&(clearTimeout(s),s=null)}function p(){f.value=!1,l()}function d(...w){l(),f.value=!0,s=setTimeout(()=>{f.value=!1,s=null,t(...w)},C(e))}return n&&(f.value=!0,P&&d()),R(p),{isPending:D(f),start:d,stop:p}}function M(t){var e;const r=C(t);return(e=r==null?void 0:r.$el)!=null?e:r}const k=P?window:void 0,W=P?window.navigator:void 0;function h(...t){let e,r,n,f;if(typeof t[0]=="string"||Array.isArray(t[0])?([r,n,f]=t,e=k):[e,r,n,f]=t,!e)return _;Array.isArray(r)||(r=[r]),Array.isArray(n)||(n=[n]);const s=[],l=()=>{s.forEach(m=>m()),s.length=0},p=(m,g,o,i)=>(m.addEventListener(g,o,i),()=>m.removeEventListener(g,o,i)),d=K(()=>[M(e),C(f)],([m,g])=>{if(l(),!m)return;const o=H(g)?{...g}:g;s.push(...r.flatMap(i=>n.map(y=>p(m,i,y,o))))},{immediate:!0,flush:"post"}),w=()=>{d(),l()};return R(w),w}let T=!1;function Y(t,e,r={}){const{window:n=k,ignore:f=[],capture:s=!0,detectIframe:l=!1}=r;if(!n)return _;V&&!T&&(T=!0,Array.from(n.document.body.children).forEach(o=>o.addEventListener("click",_)),n.document.documentElement.addEventListener("click",_));let p=!0;const d=o=>f.some(i=>{if(typeof i=="string")return Array.from(n.document.querySelectorAll(i)).some(y=>y===o.target||o.composedPath().includes(y));{const y=M(i);return y&&(o.target===y||o.composedPath().includes(y))}}),m=[h(n,"click",o=>{const i=M(t);if(!(!i||i===o.target||o.composedPath().includes(i))){if(o.detail===0&&(p=!d(o)),!p){p=!0;return}e(o)}},{passive:!0,capture:s}),h(n,"pointerdown",o=>{const i=M(t);p=!d(o)&&!!(i&&!o.composedPath().includes(i))},{passive:!0}),l&&h(n,"blur",o=>{setTimeout(()=>{var i;const y=M(t);((i=n.document.activeElement)==null?void 0:i.tagName)==="IFRAME"&&!(y!=null&&y.contains(n.document.activeElement))&&e(o)},0)})].filter(Boolean);return()=>m.forEach(o=>o())}function Q(){const t=S(!1),e=G();return e&&N(()=>{t.value=!0},e),t}function j(t){const e=Q();return x(()=>(e.value,!!t()))}function I(t,e={}){const{controls:r=!1,navigator:n=W}=e,f=j(()=>n&&"permissions"in n);let s;const l=typeof t=="string"?{name:t}:t,p=S(),d=()=>{s&&(p.value=s.state)},w=$(async()=>{if(f.value){if(!s)try{s=await n.permissions.query(l),h(s,"change",d),d()}catch{p.value="prompt"}return s}});return w(),r?{state:p,isSupported:f,query:w}:p}function ee(t={}){const{navigator:e=W,read:r=!1,source:n,copiedDuring:f=1500,legacy:s=!1}=t,l=j(()=>e&&"clipboard"in e),p=I("clipboard-read"),d=I("clipboard-write"),w=x(()=>l.value||s),m=S(""),g=S(!1),o=z(()=>g.value=!1,f);function i(){l.value&&b(p.value)?e.clipboard.readText().then(c=>{m.value=c}):m.value=a()}w.value&&r&&h(["copy","cut"],i);async function y(c=C(n)){w.value&&c!=null&&(l.value&&b(d.value)?await e.clipboard.writeText(c):u(c),m.value=c,g.value=!0,o.start())}function u(c){const v=document.createElement("textarea");v.value=c??"",v.style.position="absolute",v.style.opacity="0",document.body.appendChild(v),v.select(),document.execCommand("copy"),v.remove()}function a(){var c,v,E;return(E=(v=(c=document==null?void 0:document.getSelection)==null?void 0:c.call(document))==null?void 0:v.toString())!=null?E:""}function b(c){return c==="granted"||c==="prompt"}return{isSupported:w,text:m,copied:g,copy:y}}const U={ctrl:"control",command:"meta",cmd:"meta",option:"alt",up:"arrowup",down:"arrowdown",left:"arrowleft",right:"arrowright"};function te(t={}){const{reactive:e=!1,target:r=k,aliasMap:n=U,passive:f=!0,onEventFired:s=_}=t,l=L(new Set),p={toJSON(){return{}},current:l},d=e?L(p):p,w=new Set,m=new Set;function g(u,a){u in d&&(e?d[u]=a:d[u].value=a)}function o(){l.clear();for(const u of m)g(u,!1)}function i(u,a){var b,c;const v=(b=u.key)==null?void 0:b.toLowerCase(),O=[(c=u.code)==null?void 0:c.toLowerCase(),v].filter(Boolean);v&&(a?l.add(v):l.delete(v));for(const A of O)m.add(A),g(A,a);v==="meta"&&!a?(w.forEach(A=>{l.delete(A),g(A,!1)}),w.clear()):typeof u.getModifierState=="function"&&u.getModifierState("Meta")&&a&&[...l,...O].forEach(A=>w.add(A))}h(r,"keydown",u=>(i(u,!0),s(u)),{passive:f}),h(r,"keyup",u=>(i(u,!1),s(u)),{passive:f}),h("blur",o,{passive:!0}),h("focus",o,{passive:!0});const y=new Proxy(d,{get(u,a,b){if(typeof a!="string")return Reflect.get(u,a,b);if(a=a.toLowerCase(),a in n&&(a=n[a]),!(a in d))if(/[+_-]/.test(a)){const v=a.split(/[+_-]/g).map(E=>E.trim());d[a]=x(()=>v.every(E=>C(y[E])))}else d[a]=S(!1);const c=Reflect.get(u,a,b);return e?C(c):c}});return y}function ne(t={}){const{window:e=k}=t;if(!e)return S(!1);const r=S(e.document.hasFocus());return h(e,"blur",()=>{r.value=!1}),h(e,"focus",()=>{r.value=!0}),r}export{R as a,te as b,ee as c,ne as d,Y as o,C as t,M as u};
