import{aJ as F,aK as K,E as q,r as S,aL as B,$ as D,a4 as O,P as x,o as N,au as G}from"./Dcm-RDEy.js";function I(t){return F()?(K(t),!0):!1}function C(t){return typeof t=="function"?t():q(t)}const P=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const J=Object.prototype.toString,$=t=>J.call(t)==="[object Object]",_=()=>{},V=z();function z(){var t,e;return P&&((t=window==null?void 0:window.navigator)==null?void 0:t.userAgent)&&(/iP(ad|hone|od)/.test(window.navigator.userAgent)||((e=window==null?void 0:window.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function H(t){let e;function r(){return e||(e=t()),e}return r.reset=async()=>{const n=e;e=void 0,n&&await n},r}function Q(t,e,r={}){const{immediate:n=!0}=r,f=S(!1);let i=null;function l(){i&&(clearTimeout(i),i=null)}function p(){f.value=!1,l()}function d(...w){l(),f.value=!0,i=setTimeout(()=>{f.value=!1,i=null,t(...w)},C(e))}return n&&(f.value=!0,P&&d()),I(p),{isPending:B(f),start:d,stop:p}}function M(t){var e;const r=C(t);return(e=r==null?void 0:r.$el)!=null?e:r}const k=P?window:void 0,W=P?window.navigator:void 0;function h(...t){let e,r,n,f;if(typeof t[0]=="string"||Array.isArray(t[0])?([r,n,f]=t,e=k):[e,r,n,f]=t,!e)return _;Array.isArray(r)||(r=[r]),Array.isArray(n)||(n=[n]);const i=[],l=()=>{i.forEach(m=>m()),i.length=0},p=(m,g,o,s)=>(m.addEventListener(g,o,s),()=>m.removeEventListener(g,o,s)),d=D(()=>[M(e),C(f)],([m,g])=>{if(l(),!m)return;const o=$(g)?{...g}:g;i.push(...r.flatMap(s=>n.map(y=>p(m,s,y,o))))},{immediate:!0,flush:"post"}),w=()=>{d(),l()};return I(w),w}let T=!1;function Z(t,e,r={}){const{window:n=k,ignore:f=[],capture:i=!0,detectIframe:l=!1}=r;if(!n)return _;V&&!T&&(T=!0,Array.from(n.document.body.children).forEach(o=>o.addEventListener("click",_)),n.document.documentElement.addEventListener("click",_));let p=!0;const d=o=>f.some(s=>{if(typeof s=="string")return Array.from(n.document.querySelectorAll(s)).some(y=>y===o.target||o.composedPath().includes(y));{const y=M(s);return y&&(o.target===y||o.composedPath().includes(y))}}),m=[h(n,"click",o=>{const s=M(t);if(!(!s||s===o.target||o.composedPath().includes(s))){if(o.detail===0&&(p=!d(o)),!p){p=!0;return}e(o)}},{passive:!0,capture:i}),h(n,"pointerdown",o=>{const s=M(t);p=!d(o)&&!!(s&&!o.composedPath().includes(s))},{passive:!0}),l&&h(n,"blur",o=>{setTimeout(()=>{var s;const y=M(t);((s=n.document.activeElement)==null?void 0:s.tagName)==="IFRAME"&&!(y!=null&&y.contains(n.document.activeElement))&&e(o)},0)})].filter(Boolean);return()=>m.forEach(o=>o())}function U(){const t=S(!1),e=G();return e&&N(()=>{t.value=!0},e),t}function j(t){const e=U();return x(()=>(e.value,!!t()))}function R(t,e={}){const{controls:r=!1,navigator:n=W}=e,f=j(()=>n&&"permissions"in n);let i;const l=typeof t=="string"?{name:t}:t,p=S(),d=()=>{i&&(p.value=i.state)},w=H(async()=>{if(f.value){if(!i)try{i=await n.permissions.query(l),h(i,"change",d),d()}catch{p.value="prompt"}return i}});return w(),r?{state:p,isSupported:f,query:w}:p}function ee(t={}){const{navigator:e=W,read:r=!1,source:n,copiedDuring:f=1500,legacy:i=!1}=t,l=j(()=>e&&"clipboard"in e),p=R("clipboard-read"),d=R("clipboard-write"),w=x(()=>l.value||i),m=S(""),g=S(!1),o=Q(()=>g.value=!1,f);function s(){l.value&&b(p.value)?e.clipboard.readText().then(c=>{m.value=c}):m.value=a()}w.value&&r&&h(["copy","cut"],s);async function y(c=C(n)){w.value&&c!=null&&(l.value&&b(d.value)?await e.clipboard.writeText(c):u(c),m.value=c,g.value=!0,o.start())}function u(c){const v=document.createElement("textarea");v.value=c??"",v.style.position="absolute",v.style.opacity="0",document.body.appendChild(v),v.select(),document.execCommand("copy"),v.remove()}function a(){var c,v,E;return(E=(v=(c=document==null?void 0:document.getSelection)==null?void 0:c.call(document))==null?void 0:v.toString())!=null?E:""}function b(c){return c==="granted"||c==="prompt"}return{isSupported:w,text:m,copied:g,copy:y}}const X={ctrl:"control",command:"meta",cmd:"meta",option:"alt",up:"arrowup",down:"arrowdown",left:"arrowleft",right:"arrowright"};function te(t={}){const{reactive:e=!1,target:r=k,aliasMap:n=X,passive:f=!0,onEventFired:i=_}=t,l=O(new Set),p={toJSON(){return{}},current:l},d=e?O(p):p,w=new Set,m=new Set;function g(u,a){u in d&&(e?d[u]=a:d[u].value=a)}function o(){l.clear();for(const u of m)g(u,!1)}function s(u,a){var b,c;const v=(b=u.key)==null?void 0:b.toLowerCase(),L=[(c=u.code)==null?void 0:c.toLowerCase(),v].filter(Boolean);v&&(a?l.add(v):l.delete(v));for(const A of L)m.add(A),g(A,a);v==="meta"&&!a?(w.forEach(A=>{l.delete(A),g(A,!1)}),w.clear()):typeof u.getModifierState=="function"&&u.getModifierState("Meta")&&a&&[...l,...L].forEach(A=>w.add(A))}h(r,"keydown",u=>(s(u,!0),i(u)),{passive:f}),h(r,"keyup",u=>(s(u,!1),i(u)),{passive:f}),h("blur",o,{passive:!0}),h("focus",o,{passive:!0});const y=new Proxy(d,{get(u,a,b){if(typeof a!="string")return Reflect.get(u,a,b);if(a=a.toLowerCase(),a in n&&(a=n[a]),!(a in d))if(/[+_-]/.test(a)){const v=a.split(/[+_-]/g).map(E=>E.trim());d[a]=x(()=>v.every(E=>C(y[E])))}else d[a]=S(!1);const c=Reflect.get(u,a,b);return e?C(c):c}});return y}function ne(t={}){const{window:e=k}=t;if(!e)return S(!1);const r=S(e.document.hasFocus());return h(e,"blur",()=>{r.value=!1}),h(e,"focus",()=>{r.value=!0}),r}export{I as a,te as b,ee as c,ne as d,Z as o,C as t,M as u};
